<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <h1>Предостовляемые услуги:</h1>
    <div id="servicesDiv"></div>
  </body>
  <script>
    const servicesDiv = document.getElementById("servicesDiv");
    let services = {
      services: [
        {
          id: 1,
          head: null,
          name: "Проф.осмотр",
          node: 0,
          price: 100.0,
          sorthead: 20,
        },
        {
          id: 2,
          head: null,
          name: "Хирургия",
          node: 1,
          price: 0.0,
          sorthead: 10,
        },
        {
          id: 3,
          head: 2,
          name: "Удаление зубов",
          node: 1,
          price: 0.0,
          sorthead: 10,
        },
        {
          id: 4,
          head: 3,
          name: "Удаление зуба",
          node: 0,
          price: 800.0,
          sorthead: 10,
        },
        {
          id: 5,
          head: 3,
          name: "Удаление 8ого зуба",
          node: 0,
          price: 1000.0,
          sorthead: 30,
        },
        {
          id: 6,
          head: 3,
          name: "Удаление осколка зуба",
          node: 0,
          price: 2000.0,
          sorthead: 20,
        },
        {
          id: 7,
          head: 2,
          name: "Хирургические вмешательство",
          node: 0,
          price: 200.0,
          sorthead: 10,
        },
        {
          id: 8,
          head: 2,
          name: "Имплантация зубов",
          node: 1,
          price: 0.0,
          sorthead: 20,
        },
        {
          id: 9,
          head: 8,
          name: "Коронка",
          node: 0,
          price: 3000.0,
          sorthead: 10,
        },
        {
          id: 10,
          head: 8,
          name: "Слепок челюсти",
          node: 0,
          price: 500.0,
          sorthead: 20,
        },
      ],
    };
    services = services.services;
 
    let rootServices = services.filter((service) => {
        return service.head === null;
      });
    function getChildrenById(service) {
      let isHead = false;
      rootServices.map((el) => {
        if (service.head == el.id) {
          isHead = true;
        }
      });
      if (isHead) {
        return `<div> &nbsp ${service.name}${
          service.price ? `, ${service.price}` : ":"
        }</div>`;
      }
      return `<div> &nbsp &nbsp ${service.name}, ${service.price}</div>`;
    }
    const renderServices = () => {
      const servicesMarking = services
        .map((service) => {
          return `
          ${
            service.head
              ? getChildrenById(service)
              : `<div>
              ${service.name}${service.price ? `, ${service.price}` : ":"}
            </div>`
          }`;
        })
        .join("");
      servicesDiv.innerHTML = servicesMarking;
    };
    renderServices();
  </script>
</html>
